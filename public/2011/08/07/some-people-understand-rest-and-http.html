
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Some People Understand REST and HTTP - Literate Programming</title>
  <meta name="author" content="Steve Klabnik">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://blog.steveklabnik.com/2011/08/07/some-people-understand-rest-and-http.html"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/steveklabnik" rel="alternate" title="Literate Programming" type="application/atom+xml"/>
  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Literate Programming</a></h1>
  
    <h2>Code is data, data is code. s/data/language/g;</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/steveklabnik" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:blog.steveklabnik.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry">
  
  <header>
    
      <h1 class="entry-title">Some People Understand REST and HTTP</h1>
    
    
      <p class="meta">





  



<time datetime="2011-08-07T00:00:00-04:00" pubdate  data-updated="true" >Aug 7<span>th</span>, 2011</time></p>
    
  </header>


<div class="entry-content"><p>This is a follow-up post to my post <a href="/2011/07/03/nobody-understands-rest-or-http.html">here</a>. You probably want to
read that first.</p>

<h2>A few words on standards versus pragmatism</h2>

<p>When I wrote my first post on this topic, I tried to take a stance that
would be somewhat soft, yet forceful. Engineering is the art of making
the proper trade-offs, and there are times when following specifications
is simply not the correct decision. With that said, my motivation for
both of these posts is to eradicate some of the ignorance that some
developers have about certain areas of the HTTP spec and Fielding&#8217;s REST
paper. If you understand the correct way, yet choose to do something
else for an informed reason, that&#8217;s absolutely, 100% okay. There&#8217;s no
use throwing out the baby with the bathwater. But ignorance is never a
good thing, and most developers are ignorant when it comes to the
details of REST.</p>

<p>Secondly, while I think that REST is the best way to develop APIs, there
are other valid architectural patterns, too. Yet calling non-REST APIs
&#8216;RESTful&#8217; continues to confuse developers as to what &#8220;RESTful&#8221; means.
I&#8217;m not sure what exactly we should call &#8220;RESTish&#8221; APIs (hey, there we
go, hmmm&#8230;) but I&#8217;m also not under the illusion that I personally will
be able to make a huge dent in this. Hopefully you, humble reader, will
remember this when dealing with APIs in the future, and I&#8217;ll have made a
tiny dent, though.</p>

<h2>So who <em>does</em> understand REST?</h2>

<p>As it turns out, there are two companies that you&#8217;ve probably heard of
who have APIs that are much more RESTful than many others: <a href="http://www.twilio.com/docs/api/rest/">Twilio</a>
and <a href="http://developer.github.com/">GitHub</a>. Let&#8217;s take a look at GitHub first.</p>

<h3>GitHub: logically awesome</h3>

<p>GitHub&#8217;s developer resources are not only beautiful, but thorough. In
addition, they make use of lots more of REST.</p>

<h4>The good</h4>

<p>GitHub uses <a href="http://developer.github.com/v3/mimes/">custom MIME</a> types for all of their responses. They&#8217;re
using the vendor extensions that I talked about in my post, too. For
example:</p>

<p>  application/vnd.github-issue.text+json</p>

<p>Super cool.</p>

<p>Their <a href="http://developer.github.com/v3/#authentication">authentication</a> works in three ways: HTTP Basic, OAuth via an
Authentication Header, or via a parameter. This allows for a maximum
amount of compatibility across user agents, and gives the user some
amount of choice.</p>

<p>Their <a href="http://developer.github.com/v3/#pagination">Pagination</a> uses a header I didn&#8217;t discuss in part I: the Link
header. <a href="http://tools.ietf.org/html/rfc5988">Here</a>&#8217;s a link to the
reference. Basically, Link headers enable HATEOAS for media types which
aren&#8217;t hypertext. This is important, especially regarding JSON, since
JSON isn&#8217;t hypermedia. More on this at the end of the post. Anyway, so
pagination on GitHub:</p>

<pre><code>$ curl -I "https://api.github.com/users/steveklabnik/gists"
HTTP/1.1 200 OK
Server: nginx/1.0.4
Date: Sun, 07 Aug 2011 16:34:48 GMT
Content-Type: application/json
Connection: keep-alive
Status: 200 OK
X-RateLimit-Limit: 5000
X-RateLimit-Remaining: 4994
Link: &lt;https://api.github.com/users/steveklabnik/gists?page=2&gt;; rel="next", &lt;https://api.github.com/users/steveklabnik/gists?page=33333&gt;; rel="last"
Content-Length: 29841
</code></pre>

<p>The Link header there shows you how to get to the next page of results.
You don&#8217;t need to know how to construct the URL, you just have to parse
the header and follow it. This, for example, is a great way to connect a
resource that&#8217;s not text-based, such as a PNG, to other resources.</p>

<h4>The bad</h4>

<p>There&#8217;s really only one place that GitHub doesn&#8217;t knock it out of the
park with their new API, and that&#8217;s HATEOAS. GitHub&#8217;s API isn&#8217;t
discoverable, because there&#8217;s no information at the root:</p>

<pre><code>$ curl -I https://api.github.com/
HTTP/1.1 302 Found
Server: nginx/1.0.4
Date: Sun, 07 Aug 2011 16:44:02 GMT
Content-Type: text/html;charset=utf-8
Connection: keep-alive
Status: 302 Found
X-RateLimit-Limit: 5000
Location: http://developer.github.com
X-RateLimit-Remaining: 4993
Content-Length: 0
</code></pre>

<p>Well, at least, this is how they present it. If you ask for JSON:</p>

<pre><code>$ curl -I https://api.github.com/ -H "Accept: application/json"
HTTP/1.1 204 No Content
Server: nginx/1.0.4
Date: Sun, 07 Aug 2011 16:45:32 GMT
Connection: keep-alive
Status: 204 No Content
X-RateLimit-Limit: 5000
X-RateLimit-Remaining: 4991
Link: &lt;users/{user}&gt;; rel="user", &lt;repos/{user}/{repo}&gt;; rel="repo", &lt;gists&gt;; rel="gists"
</code></pre>

<p>You do get Links, but you have to construct things yourself. As a user,
you get the same thing. It doesn&#8217;t change the links to point to your
repos, it doesn&#8217;t give you links to anything else that you can do with
the API.</p>

<p>Instead, the root should give you a link to the particular resources
that you can actually view. Maybe something like this:</p>

<pre><code>$ curl -I https://api.github.com/ -H "Accept: application/json" -u
</code></pre>

<p>&#8220;username:password&#8221;</p>

<pre><code>HTTP/1.1 204 No Content
Server: nginx/1.0.4
Date: Sun, 07 Aug 2011 16:45:32 GMT
Connection: keep-alive
Status: 204 No Content
X-RateLimit-Limit: 5000
X-RateLimit-Remaining: 4991
Link: &lt;/gists/public&gt;; rel="public_gists", &lt;/user/repos&gt;; rel="repos", &lt;gists&gt;; rel="gists"
</code></pre>

<p>And a bunch more, for all of the other resources that are available.
This would make the API truly discoverable, and you wouldn&#8217;t be forced
to read their gorgeous documentation. :)</p>

<h3>Twilio</h3>

<p>I&#8217;ve always really enjoyed Twilio. Their API is incredibly simple to
use. I once hooked up a little &#8220;Text me when someone orders something
from my site&#8221; script, and it took me about fifteen minutes. Good stuff.</p>

<h4>The good</h4>

<p>Twilio has got the HATEOAS thing down. Check it out, their home page
says that the base URL is &#8220;https://api.twilio.com/2010-04-01&#8221;. Without
looking at any of the rest of their docs, (I glanced at a page or two,
but I didn&#8217;t really read them fully yet), I did this:</p>

<pre><code>$ curl https://api.twilio.com/2010-04-01
&lt;?xml version="1.0"?&gt;
&lt;TwilioResponse&gt;
  &lt;Version&gt;
    &lt;Name&gt;2010-04-01&lt;/Name&gt;
    &lt;Uri&gt;/2010-04-01&lt;/Uri&gt;
    &lt;SubresourceUris&gt;
      &lt;Accounts&gt;/2010-04-01/Accounts&lt;/Accounts&gt;
    &lt;/SubresourceUris&gt;
  &lt;/Version&gt;
&lt;/TwilioResponse&gt;
</code></pre>

<p>I introduced some formatting. Hmm, okay, Accounts. Let&#8217;s check this out:</p>

<pre><code>$ curl https://api.twilio.com/2010-04-01/Accounts&lt;?xml version="1.0"?&gt;
&lt;TwilioResponse&gt;&lt;RestException&gt;&lt;Status&gt;401&lt;/Status&gt;&lt;Message&gt;Authenticate&lt;/Message&gt;&lt;Code&gt;20003&lt;/Code&gt;&lt;MoreInfo&gt;http://www.twilio.com/docs/errors/20003&lt;/MoreInfo&gt;&lt;/RestException&gt;&lt;/TwilioResponse&gt;
</code></pre>

<p>Okay, so I have to be authenticated. If I was, I&#8217;d get something like
this:</p>

<pre><code>&lt;TwilioResponse&gt;
  &lt;Account&gt;
    &lt;Sid&gt;ACba8bc05eacf94afdae398e642c9cc32d&lt;/Sid&gt;
    &lt;FriendlyName&gt;Do you like my friendly name?&lt;/FriendlyName&gt;
    &lt;Type&gt;Full&lt;/Type&gt;
    &lt;Status&gt;active&lt;/Status&gt;
    &lt;DateCreated&gt;Wed, 04 Aug 2010 21:37:41 +0000&lt;/DateCreated&gt;
    &lt;DateUpdated&gt;Fri, 06 Aug 2010 01:15:02 +0000&lt;/DateUpdated&gt;
    &lt;AuthToken&gt;redacted&lt;/AuthToken&gt;
    &lt;Uri&gt;/2010-04-01/Accounts/ACba8bc05eacf94afdae398e642c9cc32d&lt;/Uri&gt;
    &lt;SubresourceUris&gt;
      &lt;AvailablePhoneNumbers&gt;/2010-04-01/Accounts/ACba8bc05eacf94afdae398e642c9cc32d/AvailablePhoneNumbers&lt;/AvailablePhoneNumbers&gt;
      &lt;Calls&gt;/2010-04-01/Accounts/ACba8bc05eacf94afdae398e642c9cc32d/Calls&lt;/Calls&gt;
      &lt;Conferences&gt;/2010-04-01/Accounts/ACba8bc05eacf94afdae398e642c9cc32d/Conferences&lt;/Conferences&gt;
      &lt;IncomingPhoneNumbers&gt;/2010-04-01/Accounts/ACba8bc05eacf94afdae398e642c9cc32d/IncomingPhoneNumbers&lt;/IncomingPhoneNumbers&gt;
      &lt;Notifications&gt;/2010-04-01/Accounts/ACba8bc05eacf94afdae398e642c9cc32d/Notifications&lt;/Notifications&gt;
      &lt;OutgoingCallerIds&gt;/2010-04-01/Accounts/ACba8bc05eacf94afdae398e642c9cc32d/OutgoingCallerIds&lt;/OutgoingCallerIds&gt;
      &lt;Recordings&gt;/2010-04-01/Accounts/ACba8bc05eacf94afdae398e642c9cc32d/Recordings&lt;/Recordings&gt;
      &lt;Sandbox&gt;/2010-04-01/Accounts/ACba8bc05eacf94afdae398e642c9cc32d/Sandbox&lt;/Sandbox&gt;
      &lt;SMSMessages&gt;/2010-04-01/Accounts/ACba8bc05eacf94afdae398e642c9cc32d/SMS/Messages&lt;/SMSMessages&gt;
      &lt;Transcriptions&gt;/2010-04-01/Accounts/ACba8bc05eacf94afdae398e642c9cc32d/Transcriptions&lt;/Transcriptions&gt;
    &lt;/SubresourceUris&gt;
  &lt;/Account&gt;
&lt;/TwilioResponse&gt;
</code></pre>

<p>Awesome. I can see my all of the other resources that I can interact
with. Other than knowing how to authenticate, I can follow the links
from the endpoint, and discover their entire API. Rock. This is the way
things are supposed to be.</p>

<h4>The bad</h4>

<p>This:</p>

<pre><code>$ curl https://api.twilio.com/2010-04-01/Accounts -H "Accept: application/json"
&lt;?xml version="1.0"?&gt;
&lt;TwilioResponse&gt;&lt;RestException&gt;&lt;Status&gt;401&lt;/Status&gt;&lt;Message&gt;Authenticate&lt;/Message&gt;&lt;Code&gt;20003&lt;/Code&gt;&lt;MoreInfo&gt;http://www.twilio.com/docs/errors/20003&lt;/MoreInfo&gt;&lt;/RestException&gt;&lt;/TwilioResponse&gt;
</code></pre>

<p>Versus this:</p>

<pre><code>$ curl https://api.twilio.com/2010-04-01/Accounts.json
{"status":401,"message":"Authenticate","code":20003,"more_info":"http:\/\/www.twilio.com\/docs\/errors\/20003"}
</code></pre>

<p>:/ Returning JSON when your resource ends with &#8216;.json&#8217; isn&#8217;t bad, but
not respecting the Accept header, even when you return the right MIME
type, is just unfortunate.</p>

<h2>&#8230; and a little Announcement</h2>

<p>It seems that this is a topic that people are really interested in. Part
I of this article was pretty well-received, and I got lots of great
email and feedback from people. It was also made pretty clear by <a href="http://twitter.com/#!/wayneeseguin/status/97733413611638784">a few</a> people that
they want more content from me on this topic.</p>

<p>So I decided to write a book about it. You can check out the site for
&#8221;<a href="http://getsomere.st">Get Some REST</a>&#8221;, and put in your email address. Then you&#8217;ll get
updated when I start pre-release sales.</p>

<p>So what&#8217;s in &#8220;Get Some REST&#8221;? It&#8217;s going to be a full description of how
to build RESTful web applications, from the ground up. Designing your
resources, laying out an API, all the details. I&#8217;m going to try to keep
most of the content language-agnostic, but provide code samples in
Rails 3.1, as well.</p>

<p>I plan on writing a bunch of content, and then releasing the book at
half-price in beta. Early adopters will be able to get their two cents
in, and I&#8217;ll cover things they still have questions on. It&#8217;ll be
available under a liberal license, in PDF, ePub, all that good stuff.</p>

<p>I&#8217;ve also set up a Twitter account at <a href="http://twitter.com/#!/getsomerestbook">@getsomerestbook</a>. I&#8217;ll be tweeting updates about the book, and also other good content
related to RESTful design. Oh, and if you&#8217;re on
<a href="http://rstat.us">rstat.us</a>, I also have an account that&#8217;ll syndicate
the same content at <a href="http://rstat.us/users/getsomerestbook">@getsomerestbook</a> too.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Steve Klabnik</span></span>

      





  



<time datetime="2011-08-07T00:00:00-04:00" pubdate  data-updated="true" >Aug 7<span>th</span>, 2011</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://blog.steveklabnik.com/2011/08/07/some-people-understand-rest-and-http.html" data-via="steveklabnik" data-counturl="http://blog.steveklabnik.com/2011/08/07/some-people-understand-rest-and-http.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
</div>

    
  </footer>
</article>

</div>

<aside role=sidebar>
  
    <aside>
<img src='http://en.gravatar.com/userimage/5335489/ee56a7574df33ed8748160494c930b98.jpg?size=190' />
<h4>Hi there, I'm Steve.</h4>
<p>
I write both code and prose. Here's some of my thoughts about software,
literature, art and code, with some politics thrown in on occasion.
You might also enjoy <a href="http://steveklabnik.com/">my website</a>.
</p>
</aside>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2011/09/06/the-secret-to-rails-oo-design.html">The Secret to Rails OO Design</a>
      </li>
    
      <li class="post">
        <a href="/2011/09/04/the-self-improvement-pomodoro.html">The Self-Improvement Pomodoro</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/22/im-making-it-dead-simple-to-contribute-to-ruby-s-documentation.html">I'm Making It Dead Simple To Contribute To Ruby's Documentation</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/19/matz-is-nice-so-we-are-nice.html">Matz is Nice So We Are Nice</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/12/we-forget-that-open-source-is-made-of-people.html">We Forget That Open Source is Made of People</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/steveklabnik">@steveklabnik</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'steveklabnik',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating...</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("steveklabnik", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/steveklabnik" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @steveklabnik</a>
  
</section>




  
</aside>


    </div>
  </div>
  <footer><p>
  Copyright &copy; 2011 - Steve Klabnik -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-10289851-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


</body>
</html>
